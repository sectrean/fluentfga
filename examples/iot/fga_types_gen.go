// Code generated by fluentfga. DO NOT EDIT.
package model

import (
	"fmt"

	fluentfga "github.com/sectrean/fluentfga"
)

// User represents an object of the "user" type.
type User struct {
	ID string
}

func (User) Provider() fluentfga.ObjectProvider { return objectProvider{} }
func (User) FgaType() string                    { return "user" }
func (o User) Identifier() string               { return fmt.Sprint(o.ID) }
func (o User) String() string                   { return fmt.Sprint("user:", o.ID) }
func (User) IsFilterable()                      {}

func newUserObject(id string) (User, error) {
	o := User{}
	_, err := fmt.Sscan(id, &o.ID)

	return o, err
}

// Device represents an object of the "device" type.
type Device struct {
	ID string

	// Direct Relations

	ItAdmin       DeviceItAdminUser       `fga:"it_admin"`
	SecurityGuard DeviceSecurityGuardUser `fga:"security_guard"`
}

func (Device) Provider() fluentfga.ObjectProvider { return objectProvider{} }
func (Device) FgaType() string                    { return "device" }
func (o Device) Identifier() string               { return fmt.Sprint(o.ID) }
func (o Device) String() string                   { return fmt.Sprint("device:", o.ID) }
func (Device) IsFilterable()                      {}

func newDeviceObject(id string) (Device, error) {
	o := Device{}
	_, err := fmt.Sscan(id, &o.ID)

	return o, err
}

// DeviceGroup represents an object of the "device_group" type.
type DeviceGroup struct {
	ID string

	// Direct Relations

	ItAdmin       *User `fga:"it_admin"`
	SecurityGuard *User `fga:"security_guard"`
}

func (DeviceGroup) Provider() fluentfga.ObjectProvider { return objectProvider{} }
func (DeviceGroup) FgaType() string                    { return "device_group" }
func (o DeviceGroup) Identifier() string               { return fmt.Sprint(o.ID) }
func (o DeviceGroup) String() string                   { return fmt.Sprint("device_group:", o.ID) }
func (DeviceGroup) IsFilterable()                      {}

func newDeviceGroupObject(id string) (DeviceGroup, error) {
	o := DeviceGroup{}
	_, err := fmt.Sscan(id, &o.ID)

	return o, err
}

// DeviceGroupItAdminUserset represents the "device_group:{ID}#it_admin" userset.
type DeviceGroupItAdminUserset struct {
	DeviceGroup
}

func (DeviceGroupItAdminUserset) Provider() fluentfga.ObjectProvider { return objectProvider{} }
func (DeviceGroupItAdminUserset) Relation() string                   { return "it_admin" }
func (u DeviceGroupItAdminUserset) String() string {
	return fmt.Sprint("device_group:", u.Identifier(), "#it_admin")
}
func (DeviceGroupItAdminUserset) IsUserset()    {}
func (DeviceGroupItAdminUserset) IsFilterable() {}

// DeviceGroupSecurityGuardUserset represents the "device_group:{ID}#security_guard" userset.
type DeviceGroupSecurityGuardUserset struct {
	DeviceGroup
}

func (DeviceGroupSecurityGuardUserset) Provider() fluentfga.ObjectProvider { return objectProvider{} }
func (DeviceGroupSecurityGuardUserset) Relation() string                   { return "security_guard" }
func (u DeviceGroupSecurityGuardUserset) String() string {
	return fmt.Sprint("device_group:", u.Identifier(), "#security_guard")
}
func (DeviceGroupSecurityGuardUserset) IsUserset()    {}
func (DeviceGroupSecurityGuardUserset) IsFilterable() {}

type objectProvider struct{}

func (objectProvider) NewObject(typ, id, rel string) (fluentfga.Object, error) {
	switch {
	case typ == "user" && rel == "":
		return newUserObject(id)
	case typ == "device" && rel == "":
		return newDeviceObject(id)
	case typ == "device_group" && rel == "it_admin":
		obj, err := newDeviceGroupObject(id)
		return DeviceGroupItAdminUserset{obj}, err
	case typ == "device_group" && rel == "security_guard":
		obj, err := newDeviceGroupObject(id)
		return DeviceGroupSecurityGuardUserset{obj}, err
	case typ == "device_group" && rel == "":
		return newDeviceGroupObject(id)

	default:
		// TODO: Custom error type
		return nil, fmt.Errorf("unknown object type %s %s %s", typ, id, rel)
	}
}
